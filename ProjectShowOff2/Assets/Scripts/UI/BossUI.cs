using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class BossUI : MonoBehaviour
{
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     FIELDS
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Player player;

    Image healthBar;
    TextMeshProUGUI healthText;
    float healthUnit;
    int currentMaxHealth;


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     SET() AND GET()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public Player Player
    {
        set { player = value; }
        get { return player; }
    }

    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     START()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Start is called before the first frame update
    void Start()
    {
       healthBar =  transform.GetChild(1).GetComponent<Image>();
        healthText = transform.GetChild(2).GetComponent<TextMeshProUGUI>();
        MaxHpRecalc();
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     UPDATE()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Update is called once per frame
    void Update()
    {
        UpdateHealthBar();
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     UPDATE HEALTH BAR()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public void UpdateHealthBar()
    {
        if (player.GetPlayerHealth().MaxHealth > currentMaxHealth)
        {
            MaxHpRecalc();
        }
        int hp = player.GetPlayerHealth().Health;
        healthBar.fillAmount = healthUnit * hp;
        healthText.text = "Health: " + hp;
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     MAX HP RECALC()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public void MaxHpRecalc()
    {
        currentMaxHealth = player.GetPlayerHealth().MaxHealth;
        float maxHp = player.GetPlayerHealth().MaxHealth;
        healthUnit = 1f / maxHp;
    }




}
