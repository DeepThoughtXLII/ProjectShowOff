using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class LevelManager : MonoBehaviour
{
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     FIELDS
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public List<Level> levels = new List<Level>();


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     LEVEL ADDLEVEL()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///remnant of some tests with editor scripting not sure if it might be used in thefuture
    public Level AddLevel()
    {
        Level level = new Level();       
        level.id = levels.Count+1;     
        levels.Add(level);
        return level;
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     CHECK XP()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public void checkXP(ILevelable levelable)
    {
        if(levelable.Level.xpNeeded <= levelable.Xp)
        {
            levelable.LevelUp(levels[levelable.Level.id]);
        }
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     GET NEXT LEVEL()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public Level GetNextLevel(Level currentLevel)
    {
        return levels[currentLevel.id];
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     GET LEVEL()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public Level GetLevel(int id)
    {
        return levels[id-1];
    }

}



///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
///                                                                     LEVEL CLASS
///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
[System.Serializable]
public class Level
{
    public int id;
    public int xpNeeded;
    public bool hasUpgrade;
    public Upgrade upgrade = null;



    public Level(int pXpNeeded = 0, bool pHasUpgrade = false, int pId = -1)
    {
        xpNeeded = pXpNeeded;
        hasUpgrade = pHasUpgrade;
        id = pId;
    }


}



///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
///                                                                     UPGRADE CLASS
///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
[System.Serializable]
public class Upgrade
{
    public enum UpgradeType { ATTACK, SPEED, HEALTH, UNDEFINED }
    public UpgradeType typeChosen = UpgradeType.UNDEFINED;

    public int AttackValue = 0;
    public int SpeedValue = 0;
    public int HealthValue = 0;

    public Upgrade()
    {
        
    }

    public void ChoseType(UpgradeType type)
    {
        typeChosen = type;
    }
}