using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class OnlinePlayerInput : MonoBehaviour
{
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     FIELDS
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    [SerializeField] Image ui;
    public Color notReady;
    [SerializeField] int index = 0;
    public TextMeshProUGUI playerName;
    private string pname = null;

    Image bg;
    Image character;


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     GET() AND SET()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public int Index
    {
        set { index = value; }
        get { return index; }
    }

    public string Name
    {
        set { pname = value; }
        get { return pname; }
    }

    public Image UIrep
    {
        set { ui = value; }
        get { return ui; }
    }



    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     START ()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    private void Start()
    {
        bg = ui.gameObject.transform.GetChild(0).GetComponent<Image>();
        character = ui.gameObject.transform.GetChild(1).GetComponent<Image>();
        playerName = ui.gameObject.transform.GetChild(2).GetComponent<TextMeshProUGUI>();
        notReady = new Color(255, 255, 255, 0.5f);
        Connected();
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     CONNECTED()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public void Connected()
    {
        bg.color = Color.white;
        character.enabled = true;
        if (pname != null)
        {
            UpdateName();
        }
    }


    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     DISCONNECTED
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    public void Disconnected()
    {
        bg.color = notReady;
        pname = "not ready";
        UpdateName();
        character.enabled = false;
        Destroy(this);
    }

    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    ///                                                                     UPDATE NAME()
    ///--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    private void UpdateName()
    {
        playerName.text = pname;
    }

}
